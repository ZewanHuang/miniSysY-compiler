# Lab8 实验报告

> 学号：19373257 姓名：黄泽桓

## 简要介绍

本次实验内容为函数，语法分析没有做太大改动。

在语义约束上，难点在于，如何判断函数调用时形参和实参数目、**类型**对应一致，这里的类型包括，INT、一维数组、二维数组、……；而数组类型的计算，需要考虑到数组定义的维度和被调用的维度，比如定义为`A[3][4][5]`，当调用时为`A[1]`时，该变量表示”二维数组“，即传参时数组的维度也需要对应相等。

因此，我在语法树节点上添加数据维度dimension的属性，INT类型对应该值为0，数组类型对应该值为数组维度，在Lval节点中 LVal -> Ident {'[' Exp ']'}，使用定义维度减去调用维度，作为dimension值。该属性作为一个综合属性从叶节点往上传递至Expr节点，从而实现某个Vn的数据类型判断。

在形参含数组时，我与lab7一样都使用模拟一维数组实现，相当于全部处理为`A[]`，当然，也会记录其定义维度值，以便根据调用计算在模拟一维数组中的位置，但总的来说，上次实验已实现了该部分，因此未作过多改动。

生成中间代码也是按照实验文档进行输出。含形参的函数寄存器ID从0开始，且参数与块内代码需间隔1个ID，特此记录。

## 参考

主要参考教材和助教实验文档对编译过程的讲解，未参考其它具体的代码或教程。

